<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .image-item {
            display: block;
            height: 300px;
            margin-bottom: 50px;
        }
    </style>
</head>

<body>
    <img class="image-item"
        data-original="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2839469695,2390546436&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3712714479,3065695217&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1526771707,4261575013&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3933151576,279025616&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2108132978,2874770161&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2679182196,2280096044&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1135428368,2172793273&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3536571681,939781296&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1337173107,1147358258&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1188589208,3401148311&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3506292406,1736757505&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">
    <img class="image-item"
        data-original="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2283795938,2987877397&fm=26&gp=0.jpg"
        alt="" src="" lazyload="true">

    <script>
        // 拿到可视区域的高度
        let viewHeight = document.documentElement.clientHeight
        console.log(viewHeight);

        function lazyLoad() {
            let eles = document.querySelectorAll("img[data-original][lazyload]")
            // console.log(eles);
            // 判断每一个img出现在可视区域内
            // eles.forEach((item) => {
            // console.log(item);
            // })
            Array.prototype.forEach.call(eles, function (item, index) {
                console.log(item);
                let rect;
                rect = item.getBoundingClientRect()     // 用于获取页面上某个元素的左上右下分别相对于浏览器视窗的位置
                // console.log(rect);
                if (rect.bottom >= 0 && rect.top < viewHeight) {    //在可视区域内
                    !function () {
                        let img = new Image()
                        img.src = item.dataset.original
                        img.onload = function () {
                            item.src = img.src
                        }
                        item.removeAttribute('data-original')   // 移除属性，下次不再遍历
                        item.removeAttribute('lazyload')
                    }()
                }
            })
        }
        lazyLoad()
        document.addEventListener('scroll', lazyLoad)
    </script>
</body>

</html>